var d=Object.defineProperty;var c=(n,s,t)=>s in n?d(n,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[s]=t;var e=(n,s,t)=>(c(n,typeof s!="symbol"?s+"":s,t),t);import{a as l,W as m,S as w,P as p,O as g,C as u,A as v,c as b,D as f,B as C,e as h,b as o,f as S,g as r}from"./OrbitControls.c3805648.js";import{G as L,S as z}from"./stats.module.5425e898.js";import"./base.d49d4c12.js";class E{constructor(s,t="three-container"){e(this,"container");e(this,"renderer");e(this,"scene");e(this,"camera");e(this,"clock",new l);e(this,"diposeCallback");e(this,"_gui");e(this,"stats");e(this,"animeID");e(this,"controls");e(this,"init",()=>{const{width:s,height:t,aspect:i}=this.size;this.renderer=new m({antialias:!0,alpha:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(s,t),this.renderer.shadowMap.enabled=!0,this.container.appendChild(this.renderer.domElement),this.scene=new w,this.camera=new p(50,i,.01,100),this.camera.position.z=5});e(this,"_addEvents",()=>{window.addEventListener("resize",this.handleResize)});e(this,"handleResize",()=>{const{width:s,height:t,aspect:i}=this.size;this.camera.aspect=i,this.camera.updateProjectionMatrix(),this.renderer.setSize(s,t),this.render()});e(this,"setStats",()=>{this.stats||(this.stats=z(),this.container.appendChild(this.stats.dom))});e(this,"setOrbitControls",s=>(this.controls||(this.controls=new g(this.camera,this.renderer.domElement)),s&&(this.controls.enableDamping=!0,this.controls.dampingFactor=s),this.controls));e(this,"animate",s=>{this.animeID=requestAnimationFrame(this.animate.bind(this,s)),this.controls&&this.controls.enableDamping&&this.controls.update(),this.stats&&this.stats.update(),s&&s(),this.render()});e(this,"render",()=>{this.renderer.render(this.scene,this.camera)});e(this,"dispose",()=>{this.diposeCallback&&this.diposeCallback(),window.removeEventListener("resize",this.handleResize),this.animeID&&cancelAnimationFrame(this.animeID)});this.containerClassName=t,this.container=s.querySelector(`.${this.containerClassName}`),this.init(),this._addEvents()}get gui(){return this._gui||(this._gui=new L),this._gui}get size(){const[s,t]=[window.innerWidth,window.innerHeight];return{width:s,height:t,aspect:s/t}}}class x extends E{constructor(t){super(t);e(this,"mesh");e(this,"wheelTarget",0);e(this,"datas",{enabledLerp:!1});e(this,"setScene",()=>{this.scene.background=new u("#1e1e1e"),this.camera.position.set(0,1,4);const t=this.setOrbitControls(.1);t.enableZoom=!1,this.setStats();const i=new v;this.scene.add(i),this.gui.add(this.datas,"enabledLerp")});e(this,"createLights",()=>{const t=new b("#fff",.2);this.scene.add(t);const i=new f("#fff",1);i.position.set(5,5,5),i.castShadow=!0;const a=3;i.shadow.camera.far=15,i.shadow.camera.top=a,i.shadow.camera.bottom=-a,i.shadow.camera.left=-a,i.shadow.camera.right=a,i.shadow.mapSize.set(2048,2048),this.scene.add(i)});e(this,"createModel",()=>{{const t=new C,i=new h({color:"#0aa"});this.mesh=new o(t,i),this.mesh.receiveShadow=!0,this.mesh.castShadow=!0,this.scene.add(this.mesh)}{const t=new S(5,5),i=new h,a=new o(t,i);a.rotation.x=-Math.PI/2,a.position.y=-1,a.receiveShadow=!0,this.scene.add(a)}});e(this,"addEvents",()=>{window.addEventListener("wheel",this.handleWheel)});e(this,"prev",0);e(this,"handleWheel",t=>{const i=Math.abs(t.deltaY);0<=i-this.prev&&(this.wheelTarget+=0<t.deltaY?1:-1),this.prev=i});e(this,"update",()=>{if(this.datas.enabledLerp){const t=r.lerp(this.mesh.rotation.x,this.wheelTarget,.05),i=r.lerp(this.mesh.rotation.y,this.wheelTarget*.5,.05),a=r.lerp(this.mesh.rotation.z,this.wheelTarget*.1,.05);this.mesh.rotation.set(t,i,a)}else this.mesh.rotation.set(this.wheelTarget,this.wheelTarget*.5,this.wheelTarget*.1)});e(this,"setDispose",()=>{this.diposeCallback=()=>{window.removeEventListener("wheel",this.handleWheel)}});this.setScene(),this.createLights(),this.createModel(),this.addEvents(),this.setDispose(),this.animate(this.update)}}class D{constructor(){e(this,"canvas");e(this,"createCanvas",()=>{const s=document.querySelector(".step4");return new x(s)});e(this,"addEvents",()=>{window.addEventListener("beforeunload",()=>{this.canvas.dispose()})});this.canvas=this.createCanvas(),this.addEvents()}}new D;
